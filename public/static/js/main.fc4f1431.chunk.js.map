{"version":3,"sources":["redux/reducers/projects.js","redux/reducers/index.js","redux/store.js","redux/actions/projects.js","components/Logout.jsx","components/UserBlock.jsx","assets/img/logo.svg","assets/img/brand_logo.svg","pages/Home.jsx","components/Loader.jsx","pages/Project/EditProject.jsx","components/ResourceSearch.jsx","pages/Project/Project.jsx","pages/Infrapwd/Infrapwd.jsx","pages/Infrapwd/CreateInfrapwd.jsx","pages/Infrapwd/EditInfrapwd.jsx","pages/User/User.jsx","pages/User/CreateUser.jsx","pages/User/EditUser.jsx","components/UserPasswords.jsx","components/UsefulLinks.jsx","pages/Dashboard/Dashboard.jsx","pages/Infralogins/Infralogins.jsx","pages/Changes/Changes.jsx","pages/Auth/Login.jsx","components/AuthLoader.jsx","App.jsx","index.js"],"names":["initialState","activeProject","projectLoading","projectsList","tableLoading","tableColumns","projectStatuses","tableData","tablePaginationConfig","searchParams","userInfo","pizzas","state","action","type","payload","rootReducer","combineReducers","projects","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","setUserInfo","Logout","onLogout","dispatch","useDispatch","history","useHistory","React","useState","isLoading","setIsLoading","onClick","axios","post","then","localStorage","clear","push","catch","console","log","finally","className","icon","ExportOutlined","loading","UserBlock","userName","getItem","menu","style","marginRight","fontWeight","overlay","trigger","Header","Layout","Content","Sider","Home","onSuccessLogout","collapsed","setCollapsed","role","useSelector","isResourceAvailable","collapsible","onCollapse","prev","src","brandLogo","logo","alt","theme","defaultSelectedKeys","mode","Item","ProjectOutlined","to","InfoCircleOutlined","UnorderedListOutlined","Divider","backgroundColor","UserOutlined","ContactsOutlined","padding","exact","path","Loader","antIcon","LoadingOutlined","fontSize","spin","textAlign","marginTop","indicator","EditProject","isLoadingPage","setIsLoadingPage","initValues","setInitvalues","targetKeys","setTargetKeys","userList","setUsertList","id","useParams","useEffect","get","data","users","length","projectUser","map","user","err","marginLeft","name","onFinish","values","newProject","put","message","success","rsp","error","initialValues","autoComplete","label","marks","0","1","2","3","step","max","dataSource","filter","titles","onChange","value","rowKey","record","render","item","htmlType","Search","Input","ResourceSearch","onSearch","placeholder","allowClear","width","Project","projectList","setProjectList","searchValue","setSearchValue","columns","title","dataIndex","key","ArrowRightOutlined","color","ArrowLeftOutlined","_","size","project","toLowerCase","includes","pagination","hideOnSinglePage","Infrapwd","infrapwdList","setInfrapwdList","e","infrapwdId","thisButton","currentTarget","innerText","delete","newinfrapwdList","infrapwd","onDeleteInfrapwd","pwd","displayname","CreateInfrapwd","setUserList","infrapwdUser","setInfrapwdUser","isAllAccess","setIsAllAccess","newData","newInfrapwd","access_to_all","rules","required","valuePropName","checked","optionFilterProp","defaultValue","checkedValues","options","EditInfrapwd","User","isAdmin","userId","newUserList","onDeleteUser","newPwd","prompt","patch","userid","password","onResetPassword","CreateUser","setProjectsList","newUser","Password","Group","optionType","buttonStyle","nextTargetKeys","EditUser","setInitValues","availableProjects","disabled","Paragraph","Typography","UserPasswords","username","span","extra","copyable","tooltips","UsefulLinks","infralogins","statisticLink","setStatisticLink","links","link","ToolTwoTone","UnlockTwoTone","PieChartTwoTone","DatabaseTwoTone","baseLink","i","login","getStatisticLink","direction","href","rel","target","Dashboard","passwords","in","scriptlink","gutter","in_count","out_count","Object","keys","pwdtype","index","Infralogins","infralogins_all","availableLogin","Changes","height","border","boxShadow","borderRadius","Login","onLogin","marginBottom","setItem","inProjectCount","reduce","total","current","weight","outProjectCount","out","resultData","response","prefix","LockOutlined","AuthLoader","display","justifyContent","alignItems","App","isLoggedin","setIsLoggedin","checkAuth","setCheckAuth","defaults","baseURL","withCredentials","interceptors","use","status","location","reload","Promise","reject","ReactDOM","StrictMode","locale","ruRU","document","getElementById"],"mappings":"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","file":"static/js/main.fc4f1431.chunk.js","sourcesContent":["const initialState = {\r\n\tactiveProject: null,\r\n\tprojectLoading: false,\r\n\tprojectsList: null,\r\n\ttableLoading: false,\r\n\ttableColumns: [],\r\n\tprojectStatuses: [],\r\n\ttableData: null,\r\n\ttablePaginationConfig: null,\r\n\tsearchParams: null,\r\n\tuserInfo: null,\r\n};\r\n\r\nconst pizzas = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_USER_INFO':\r\n\t\t\treturn { ...state, userInfo: action.payload };\r\n\r\n\t\tcase 'SET_ACTIVE_PROJECT':\r\n\t\t\treturn { ...state, activeProject: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_LOADING':\r\n\t\t\treturn { ...state, projectLoading: action.payload };\r\n\r\n\t\tcase 'SET_PROJECTS_LIST':\r\n\t\t\treturn { ...state, projectsList: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_STATUSES':\r\n\t\t\treturn { ...state, projectStatuses: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_LOADING':\r\n\t\t\treturn { ...state, tableLoading: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_COLUMNS':\r\n\t\t\treturn { ...state, tableColumns: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: action.payload };\r\n\r\n\t\tcase 'RESET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: null };\r\n\r\n\t\tcase 'RESET_STORAGE':\r\n\t\t\treturn { ...initialState };\r\n\r\n\t\tcase 'SET_TABLE_PAGINATIONCONFIG':\r\n\t\t\treturn { ...state, tablePaginationConfig: action.payload };\r\n\r\n\t\tcase 'SET_SEARCH_PARAMS':\r\n\t\t\treturn { ...state, searchParams: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default pizzas;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport projects from './projects';\r\n\r\nconst rootReducer = combineReducers({\r\n\tprojects,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nexport const setUserInfo = (payload) => ({\r\n\ttype: 'SET_USER_INFO',\r\n\tpayload,\r\n});\r\n\r\nexport const setActiveProject = (payload) => ({\r\n\ttype: 'SET_ACTIVE_PROJECT',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectLoading = (payload) => ({\r\n\ttype: 'SET_PROJECT_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectsList = (payload) => ({\r\n\ttype: 'SET_PROJECTS_LIST',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectStatuses = (payload) => ({\r\n\ttype: 'SET_PROJECT_STATUSES',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableLoading = (payload) => ({\r\n\ttype: 'SET_TABLE_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableColumns = (payload) => ({\r\n\ttype: 'SET_TABLE_COLUMNS',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableData = (payload) => ({\r\n\ttype: 'SET_TABLE_DATA',\r\n\tpayload,\r\n});\r\n\r\nexport const resetTableData = () => ({\r\n\ttype: 'RESET_TABLE_DATA',\r\n});\r\n\r\nexport const setTablePaginationConfig = (payload) => ({\r\n\ttype: 'SET_TABLE_PAGINATIONCONFIG',\r\n\tpayload,\r\n});\r\n\r\nexport const setSearchParams = (payload) => ({\r\n\ttype: 'SET_SEARCH_PARAMS',\r\n\tpayload,\r\n});\r\n\r\nexport const resetStorage = () => ({\r\n\ttype: 'RESET_STORAGE',\r\n});\r\n\r\nexport const fetchActiveProject = (parameters, activeProject) => (dispatch) => {\r\n\tconst params = parameters || { project: activeProject };\r\n\r\n\taxios\r\n\t\t.post('/project/search', params)\r\n\t\t.then(({ data }) => {\r\n\t\t\tconst tableConfig = {\r\n\t\t\t\ttotal: data.paginate.total,\r\n\t\t\t\tcurrent_page: data.paginate.current_page,\r\n\t\t\t\tper_page: data.paginate.per_page,\r\n\t\t\t};\r\n\r\n\t\t\tconst statuses = data.statuses.map((status) => {\r\n\t\t\t\treturn { value: status };\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(setTablePaginationConfig(tableConfig));\r\n\t\t\tdispatch(setTableData(data.paginate.data));\r\n\t\t\tdispatch(setProjectStatuses(statuses));\r\n\t\t})\r\n\t\t.catch(() => message.error('Ошибка запроса'))\r\n\t\t.finally(() => {\r\n\t\t\tdispatch(setTableLoading(false));\r\n\t\t\tdispatch(setProjectLoading(false));\r\n\t\t});\r\n};\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport { ExportOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { resetStorage } from '../redux/actions/projects';\r\n\r\nconst Logout = ({ onLogout }) => {\r\n\tconst dispatch = useDispatch();\r\n\tlet history = useHistory();\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tconst handleLogout = () => {\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/logout')\r\n\t\t\t.then(() => {\r\n\t\t\t\tlocalStorage.clear();\r\n\t\t\t\tonLogout();\r\n\t\t\t\tdispatch(resetStorage());\r\n\t\t\t\thistory.push('/');\r\n\t\t\t})\r\n\t\t\t.catch(() => console.log('logout catch error'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\ttype=\"text\"\r\n\t\t\tonClick={handleLogout}\r\n\t\t\tclassName=\"btn-logout\"\r\n\t\t\ticon={<ExportOutlined />}\r\n\t\t\tloading={isLoading}>\r\n\t\t\tВыйти\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default Logout;\r\n","import React from 'react';\r\nimport { Avatar, Menu, Dropdown } from 'antd';\r\nimport Logout from './Logout';\r\n\r\nconst UserBlock = ({ onLogout }) => {\r\n\tconst userName = localStorage.getItem('auth_name');\r\n\r\n\tconst menu = (\r\n\t\t<Menu>\r\n\t\t\t{/* <Menu.Item key=\"settings\">Настройки</Menu.Item> */}\r\n\t\t\t{/* <Menu.Divider /> */}\r\n\t\t\t<Logout onLogout={onLogout} />\r\n\t\t</Menu>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{userName ? <span style={{ marginRight: 8, fontWeight: 600 }}>{userName}</span> : null}\r\n\r\n\t\t\t<Dropdown overlay={menu} trigger={['click']}>\r\n\t\t\t\t<Avatar className=\"user-avatar\">{userName ? userName[0] : '-'}</Avatar>\r\n\t\t\t</Dropdown>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default UserBlock;\r\n","export default __webpack_public_path__ + \"static/media/logo.c7696728.svg\";","export default __webpack_public_path__ + \"static/media/brand_logo.e9581c6a.svg\";","import React from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\r\nimport {\r\n\tDashboard,\r\n\tProject,\r\n\tEditProject,\r\n\tEditUser,\r\n\tCreateUser,\r\n\tUser,\r\n\tEditInfrapwd,\r\n\tCreateInfrapwd,\r\n\tInfrapwd,\r\n\tInfralogins,\r\n\tChanges,\r\n} from './index';\r\nimport {\r\n\tProjectOutlined,\r\n\tUserOutlined,\r\n\tUnorderedListOutlined,\r\n\tContactsOutlined,\r\n\tInfoCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport UserBlock from '../components/UserBlock';\r\n\r\nimport logo from '../assets/img/logo.svg';\r\nimport brandLogo from '../assets/img/brand_logo.svg';\r\n\r\nconst { Header, Content, Sider } = Layout;\r\n\r\nconst Home = ({ onSuccessLogout }) => {\r\n\t// let location = useLocation();\r\n\tconst [collapsed, setCollapsed] = React.useState(false);\r\n\r\n\tconst { userInfo } = useSelector(({ projects }) => projects);\r\n\r\n\t// const isAdmin = userInfo.role === 0;\r\n\tconst role = userInfo.role;\r\n\tconst isResourceAvailable = role === 1 || role === 0;\r\n\r\n\tconst onCollapse = () => {\r\n\t\tsetCollapsed((prev) => !prev);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<Sider collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n\t\t\t\t<div className=\"brand-logo\">\r\n\t\t\t\t\t{/* <Link to=\"/\"> */}\r\n\t\t\t\t\t<img src={collapsed ? brandLogo : logo} alt=\"logo\" />\r\n\t\t\t\t\t{/* </Link> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Menu className=\"menu\" theme=\"dark\" defaultSelectedKeys={['/dash']} mode=\"inline\">\r\n\t\t\t\t\t<Menu.Item key=\"/dash\" icon={<ProjectOutlined />}>\r\n\t\t\t\t\t\t<Link to=\"/dash\">Дашборд</Link>\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t<Menu.Item key=\"/changes\" icon={<InfoCircleOutlined />}>\r\n\t\t\t\t\t\t<Link to=\"/changes\">Изменения</Link>\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//Оператор\r\n\t\t\t\t\t\trole === 2 && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Menu.Item key=\"/schedule\" icon={<UnorderedListOutlined />}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/schedule\">График</Link>\r\n\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//Админ или супервайзер\r\n\t\t\t\t\t\tisResourceAvailable && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Menu.Divider style={{ backgroundColor: '#002140' }} />\r\n\t\t\t\t\t\t\t\t<Menu.Item key=\"/projects\" icon={<UnorderedListOutlined />}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/projects\">Проекты</Link>\r\n\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t<Menu.Item key=\"/users\" icon={<UserOutlined />}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/users\">Пользователи</Link>\r\n\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t<Menu.Item key=\"/infrapwds\" icon={<ContactsOutlined />}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/infrapwds\">Доступы в ICC</Link>\r\n\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Menu>\r\n\t\t\t</Sider>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Header>\r\n\t\t\t\t\t<UserBlock onLogout={onSuccessLogout} />\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Content\r\n\t\t\t\t\tclassName=\"site-layout\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tpadding: '0 32px',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path=\"/dash\">\r\n\t\t\t\t\t\t\t<Dashboard />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route exact path=\"/changes\">\r\n\t\t\t\t\t\t\t<Changes />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route exact path=\"/infralogins\">\r\n\t\t\t\t\t\t\t<Infralogins />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//Оператор\r\n\t\t\t\t\t\t\trole === 2 && (\r\n\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/schedule\">\r\n\t\t\t\t\t\t\t\t\t\t<div>В разработке...</div>\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//Админ или супервайзер\r\n\t\t\t\t\t\t\tisResourceAvailable && (\r\n\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/projects\">\r\n\t\t\t\t\t\t\t\t\t\t<Project />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/projects/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t\t<EditProject />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/users\">\r\n\t\t\t\t\t\t\t\t\t\t<User />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/users/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t\t<EditUser />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/users/create\">\r\n\t\t\t\t\t\t\t\t\t\t<CreateUser />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/infrapwds\">\r\n\t\t\t\t\t\t\t\t\t\t<Infrapwd />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/infrapwds/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t\t<EditInfrapwd />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/infrapwds/create\">\r\n\t\t\t\t\t\t\t\t\t\t<CreateInfrapwd />\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Content>\r\n\t\t\t</Layout>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\n\r\nconst Loader = () => {\r\n\tconst antIcon = <LoadingOutlined style={{ fontSize: 28 }} spin />;\r\n\r\n\treturn (\r\n\t\t<div style={{ textAlign: 'center', marginTop: '2px' }}>\r\n\t\t\t<Spin indicator={antIcon} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Form, Button, message, Slider, Transfer } from 'antd';\r\nimport axios from 'axios';\r\nimport Loader from '../../components/Loader';\r\n\r\nconst EditProject = () => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [initValues, setInitvalues] = React.useState({});\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [userList, setUsertList] = React.useState([]);\r\n\tconst { id } = useParams();\r\n\r\n\t// const projectTypes = [\r\n\t// \t{ label: 'Входящий', value: 0 },\r\n\t// \t{ label: 'Исходящий', value: 1 },\r\n\t// ];\r\n\r\n\tconst marks = {\r\n\t\t0: 0,\r\n\t\t1: 1,\r\n\t\t2: 2,\r\n\t\t3: 3,\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios.get('/users').then(({ data }) => {\r\n\t\t\tsetUsertList(data);\r\n\t\t});\r\n\t}, []);\r\n\r\n\t// let history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get(`/projects/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitvalues(data);\r\n\t\t\t\tif (data.users.length > 0) {\r\n\t\t\t\t\tconst projectUser = data.users.map((user) => user.id);\r\n\t\t\t\t\tsetTargetKeys(projectUser);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newProject = { ...values, users: targetKeys };\r\n\t\taxios\r\n\t\t\t.put(`/projects/${id}`, newProject)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\t// history.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch((rsp) => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\t// #region onChangeUsers\r\n\tconst onChangeUsers = (value) => {\r\n\t\tsetTargetKeys(value);\r\n\t};\r\n\t// #endregion onChangeUsers\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Редактировать проект</b>\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/projects'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoadingPage ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Form.Item name=\"weight\" label=\"Вес\">\r\n\t\t\t\t\t\t\t\t<Slider marks={marks} step={null} max={3} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item label=\"Пользователи\">\r\n\t\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\t\tdataSource={userList.filter((user) => user.role !== 0)}\r\n\t\t\t\t\t\t\t\t\ttitles={['Все', 'Кто знает']}\r\n\t\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\t\tonChange={onChangeUsers}\r\n\t\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassName=\"btn-resource\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\t\t\tОбновить проект\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditProject;\r\n","import React from 'react';\r\nimport { Input } from 'antd';\r\n\r\nconst { Search } = Input;\r\n\r\nconst ResourceSearch = ({ onSearch }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Search\r\n\t\t\t\tplaceholder=\"Поиск\"\r\n\t\t\t\tonSearch={(value) => onSearch(value)}\r\n\t\t\t\tallowClear\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth: 200,\r\n\t\t\t\t\tmarginRight: 'auto',\r\n\t\t\t\t\tmarginLeft: 20,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ResourceSearch;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport { Table, Space } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { ArrowLeftOutlined, ArrowRightOutlined } from '@ant-design/icons';\r\n\r\nimport Loader from '../../components/Loader';\r\nimport ResourceSearch from '../../components/ResourceSearch';\r\n\r\nconst Project = () => {\r\n\tconst [projectList, setProjectList] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\tconst [searchValue, setSearchValue] = React.useState('');\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/projects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetProjectList(data);\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t}, []);\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Проект',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Тип',\r\n\t\t\tdataIndex: 'type',\r\n\t\t\tkey: 'type',\r\n\t\t\trender: (type) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{!type ? (\r\n\t\t\t\t\t\t\t<ArrowLeftOutlined style={{ fontSize: '16px', color: '#52c41a' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ArrowRightOutlined style={{ fontSize: '16px', color: '#1890ff' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ссылка на скрипт',\r\n\t\t\tdataIndex: 'scriptlink',\r\n\t\t\tkey: 'scriptlink',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Вес',\r\n\t\t\tdataIndex: 'weight',\r\n\t\t\tkey: 'weight',\r\n\t\t},\r\n\t\t// {\r\n\t\t// \ttitle: 'Доступен для',\r\n\t\t// \tdataIndex: 'users',\r\n\t\t// \tkey: 'users',\r\n\t\t// \trender: (users) => {\r\n\t\t// \t\tif (users.length) {\r\n\t\t// \t\t\treturn (\r\n\t\t// \t\t\t\t<>\r\n\t\t// \t\t\t\t\t{users.map((user) => (\r\n\t\t// \t\t\t\t\t\t<Tag color=\"blue\" key={user.id}>\r\n\t\t// \t\t\t\t\t\t\t{user.name}\r\n\t\t// \t\t\t\t\t\t</Tag>\r\n\t\t// \t\t\t\t\t))}\r\n\t\t// \t\t\t\t</>\r\n\t\t// \t\t\t);\r\n\t\t// \t\t}\r\n\t\t// \t},\r\n\t\t// },\r\n\t\t{\r\n\t\t\ttitle: 'Действия',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/projects/${record.id}/edit`}>Ред</Link>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Список проектов</b>\r\n\t\t\t\t<ResourceSearch onSearch={(value) => setSearchValue(value)} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={projectList?.filter((project) =>\r\n\t\t\t\t\t\t\tproject.name.toLowerCase().includes(searchValue.toLowerCase()),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Project;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport { Table, Space, Button, Tag, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceSearch from '../../components/ResourceSearch';\r\n\r\nconst Infrapwd = () => {\r\n\tconst [infrapwdList, setInfrapwdList] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\tconst [searchValue, setSearchValue] = React.useState('');\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/infrapwds')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInfrapwdList(data);\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t}, []);\r\n\r\n\tconst onDeleteInfrapwd = (e, infrapwdId) => {\r\n\t\tconst thisButton = e.currentTarget;\r\n\t\tthisButton.innerText = 'Удаляю';\r\n\r\n\t\taxios\r\n\t\t\t.delete(`/infrapwds/${infrapwdId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newinfrapwdList = infrapwdList.filter(\r\n\t\t\t\t\t(infrapwd) => infrapwd.id !== infrapwdId,\r\n\t\t\t\t);\r\n\t\t\t\tsetInfrapwdList(newinfrapwdList);\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthisButton.innerText = 'Удалить';\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Отображаемое имя',\r\n\t\t\tdataIndex: 'displayname',\r\n\t\t\tkey: 'displayname',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Логин',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tkey: 'username',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Пароль',\r\n\t\t\tdataIndex: 'password',\r\n\t\t\tkey: 'password',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Доступен для',\r\n\t\t\tdataIndex: 'users',\r\n\t\t\tkey: 'users',\r\n\t\t\trender: (users) => {\r\n\t\t\t\tif (users.length) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t\t\t\t<Tag color=\"blue\" key={user.id}>\r\n\t\t\t\t\t\t\t\t\t{user.name}\r\n\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Действия',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/infrapwds/${record.id}/edit`}>Ред</Link>\r\n\t\t\t\t\t<Button type=\"link\" onClick={(e) => onDeleteInfrapwd(e, record.id)}>\r\n\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Список логинов ICC</b>\r\n\t\t\t\t<ResourceSearch onSearch={(value) => setSearchValue(value)} />\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/infrapwds/create'}>Добавить логин</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={infrapwdList?.filter((pwd) =>\r\n\t\t\t\t\t\t\tpwd.displayname.toLowerCase().includes(searchValue.toLowerCase()),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Infrapwd;\r\n","import React from 'react';\r\nimport { Form, Input, Button, Select, Switch, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst CreateInfrapwd = () => {\r\n\tconst [userList, setUserList] = React.useState([]);\r\n\tconst [infrapwdUser, setInfrapwdUser] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [isAllAccess, setIsAllAccess] = React.useState(false);\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newData = data.map((user) => {\r\n\t\t\t\t\treturn { label: user.name, value: user.id };\r\n\t\t\t\t});\r\n\t\t\t\tsetUserList(newData);\r\n\t\t\t})\r\n\t\t\t.finally(() => console.log('users fetched'));\r\n\t}, []);\r\n\r\n\tconst handleAccessAllChange = (checked) => {\r\n\t\tsetIsAllAccess(checked);\r\n\t\tif (checked === true) {\r\n\t\t\tsetInfrapwdUser([]);\r\n\t\t}\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tconst newInfrapwd = { ...values, users: infrapwdUser };\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/infrapwds', newInfrapwd)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\tconst onChangeUsers = (checkedValues) => {\r\n\t\tsetInfrapwdUser(checkedValues);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Новый логин</b>\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/infrapwds'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tinitialValues={{ access_to_all: false }}>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Отображаемое имя\"\r\n\t\t\t\t\t\tname=\"displayname\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Пароль\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item label=\"Доступен всем\" name=\"access_to_all\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t<Switch onChange={handleAccessAllChange} />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t{!isAllAccess && (\r\n\t\t\t\t\t\t<Form.Item label=\"Пользователи\">\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Выбрать пользователей\"\r\n\t\t\t\t\t\t\t\tdefaultValue={infrapwdUser}\r\n\t\t\t\t\t\t\t\tonChange={onChangeUsers}\r\n\t\t\t\t\t\t\t\toptions={userList}></Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"btn-resource\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\tДобавить логин\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default CreateInfrapwd;\r\n","import React from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Form, Input, Button, message, Switch, Select } from 'antd';\r\nimport axios from 'axios';\r\nimport Loader from '../../components/Loader';\r\n\r\nconst EditInfrapwd = () => {\r\n\tconst [userList, setUsertList] = React.useState([]);\r\n\tconst [infrapwdUser, setInfrapwdUser] = React.useState([]);\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitvalues] = React.useState({});\r\n\tconst [isAllAccess, setIsAllAccess] = React.useState(false);\r\n\r\n\tconst { id } = useParams();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newData = data.map((user) => {\r\n\t\t\t\t\treturn { label: user.name, value: user.id };\r\n\t\t\t\t});\r\n\t\t\t\tsetUsertList(newData);\r\n\t\t\t})\r\n\t\t\t.finally(() => console.log('users fetched at edit page'));\r\n\t}, []);\r\n\r\n\t// let history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get(`/infrapwds/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitvalues(data);\r\n\t\t\t\tsetIsAllAccess(data.access_to_all === 1 ? true : false);\r\n\t\t\t\tif (data.users.length > 0) {\r\n\t\t\t\t\tconst infrapwdUser = data.users.map((user) => user.id);\r\n\t\t\t\t\tsetInfrapwdUser(infrapwdUser);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newInfrapwd = { ...values, users: infrapwdUser };\r\n\t\taxios\r\n\t\t\t.put(`/infrapwds/${id}`, newInfrapwd)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\t// history.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\tconst handleAccessAllChange = (checked) => {\r\n\t\tsetIsAllAccess(checked);\r\n\t\tif (checked === true) {\r\n\t\t\tsetInfrapwdUser([]);\r\n\t\t}\r\n\t};\r\n\r\n\tconst onChangeUsers = (value) => {\r\n\t\tsetInfrapwdUser(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Редактировать логин</b>\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/infrapwds'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoadingPage ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Отображаемое имя\"\r\n\t\t\t\t\t\t\t\tname=\"displayname\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Пароль\"\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Доступен всем\"\r\n\t\t\t\t\t\t\t\tname=\"access_to_all\"\r\n\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t<Switch onChange={handleAccessAllChange} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t{!isAllAccess && (\r\n\t\t\t\t\t\t\t\t<Form.Item label=\"Пользователи\">\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Выбрать пользователей\"\r\n\t\t\t\t\t\t\t\t\t\tdefaultValue={infrapwdUser}\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChangeUsers}\r\n\t\t\t\t\t\t\t\t\t\toptions={userList}></Select>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassName=\"btn-resource\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\t\t\tОбновить логин\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditInfrapwd;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Table, Space, Button, Tag, message } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceSearch from '../../components/ResourceSearch';\r\n\r\nconst User = () => {\r\n\tconst [userList, setUserList] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\tconst [searchValue, setSearchValue] = React.useState('');\r\n\r\n\tconst { userInfo } = useSelector(({ projects }) => projects);\r\n\r\n\tconst isAdmin = userInfo.role === 0;\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetUserList(data);\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t}, []);\r\n\r\n\tconst onDeleteUser = (e, userId) => {\r\n\t\tconst thisButton = e.currentTarget;\r\n\t\tthisButton.innerText = 'Удаляю';\r\n\r\n\t\taxios\r\n\t\t\t.delete(`/users/${userId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newUserList = userList.filter((user) => user.id !== userId);\r\n\t\t\t\tsetUserList(newUserList);\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthisButton.innerText = 'Удалить';\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onResetPassword = (userId) => {\r\n\t\tconst newPwd = prompt('Введите новый пароль');\r\n\r\n\t\tif (newPwd) {\r\n\t\t\tconsole.log(userId, newPwd);\r\n\r\n\t\t\taxios\r\n\t\t\t\t.patch(`/user/changepwd`, { userid: userId, password: newPwd })\r\n\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\tmessage.success(data.message);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => message.error('Ошибка при смене пароля'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Пользователь',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\trender: (_, record) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{record.role === 0 ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{record.name} <Tag>admin</Tag>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : record.role === 1 ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{record.name} <Tag>supervisor</Tag>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\trecord.name\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Логин',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tkey: 'username',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Действия',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/users/${record.id}/edit`}>Ред</Link>\r\n\t\t\t\t\t{isAdmin && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Button type=\"link\" onClick={(e) => onDeleteUser(e, record.id)}>\r\n\t\t\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button type=\"link\" onClick={() => onResetPassword(record.id)}>\r\n\t\t\t\t\t\t\t\tСброс пароля\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Список пользователей</b>\r\n\t\t\t\t<ResourceSearch onSearch={(value) => setSearchValue(value)} />\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/users/create'}>Добавить пользователя</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={userList?.filter((user) =>\r\n\t\t\t\t\t\t\tuser.name.toLowerCase().includes(searchValue.toLowerCase()),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { Form, Input, Button, Radio, Transfer, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst CreateUser = () => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [projectsList, setProjectsList] = React.useState([]);\r\n\r\n\tconst roles = [\r\n\t\t{ label: 'Админ', value: 0 },\r\n\t\t{ label: 'Супервайзер', value: 1 },\r\n\t\t{ label: 'Оператор', value: 2 },\r\n\t];\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios.get('/projects').then(({ data }) => {\r\n\t\t\tsetProjectsList(data);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst onProjectChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tconst newUser = { ...values, projects: targetKeys };\r\n\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/users', newUser)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Новый пользователь</b>\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/users'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tinitialValues={{ role: 2 }}\r\n\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Пароль в ЛК\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль!' }]}>\r\n\t\t\t\t\t\t<Input.Password />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Пароль в Infra\"\r\n\t\t\t\t\t\tname=\"infrapwd\"\r\n\t\t\t\t\t\trules={[{ required: false, message: 'Введите пароль в Infra!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item label=\"Пароль в RocketChat\" name=\"rocketpwd\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item label=\"Пароль в TeamPass\" name=\"teampasspwd\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Роль\"\r\n\t\t\t\t\t\tname=\"role\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Укажите роль!' }]}>\r\n\t\t\t\t\t\t<Radio.Group options={roles} optionType=\"button\" buttonStyle=\"solid\" />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item label=\"Доступные проекты\">\r\n\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\tdataSource={projectsList}\r\n\t\t\t\t\t\t\ttitles={['Все', 'Доступные']}\r\n\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\tonChange={onProjectChange}\r\n\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"btn-resource\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\tДобавить пользователя\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default CreateUser;\r\n","import React from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { Form, Input, Button, Radio, Transfer, message } from 'antd';\r\nimport axios from 'axios';\r\nimport Loader from '../../components/Loader';\r\n\r\nconst EditUser = () => {\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitValues] = React.useState({});\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [projectsList, setProjectsList] = React.useState([]);\r\n\tconst { id } = useParams();\r\n\r\n\tconst { userInfo } = useSelector(({ projects }) => projects);\r\n\r\n\tconst isAdmin = userInfo.role === 0;\r\n\r\n\tconst roles = [\r\n\t\t{ label: 'Админ', value: 0 },\r\n\t\t{ label: 'Супервайзер', value: 1 },\r\n\t\t{ label: 'Оператор', value: 2 },\r\n\t];\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get(`/users/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitValues(data.user);\r\n\t\t\t\tconst availableProjects = data.user.projects.map((project) => project.id);\r\n\t\t\t\tsetTargetKeys(availableProjects);\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios.get('/projects').then(({ data }) => {\r\n\t\t\tsetProjectsList(data);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst onProjectChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newUser = { ...values, projects: targetKeys };\r\n\t\taxios\r\n\t\t\t.put(`/users/${id}`, newUser)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Редактировать пользователя</b>\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/users'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\" style={{ marginTop: 20 }}>\r\n\t\t\t\t{isLoadingPage ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t<Input disabled={!isAdmin} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t\t\t<Input disabled={!isAdmin} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Пароль в RocketChat\"\r\n\t\t\t\t\t\t\t\tname=\"rocketpwd\"\r\n\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t{ required: true, message: 'Введите пароль в RocketChat!' },\r\n\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t<Input disabled={!isAdmin} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Пароль в TeamPass\"\r\n\t\t\t\t\t\t\t\tname=\"teampasspwd\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль в TeamPass!' }]}>\r\n\t\t\t\t\t\t\t\t<Input disabled={!isAdmin} />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Роль\"\r\n\t\t\t\t\t\t\t\tname=\"role\"\r\n\t\t\t\t\t\t\t\trules={[{ required: false, message: 'Укажите роль!' }]}>\r\n\t\t\t\t\t\t\t\t<Radio.Group\r\n\t\t\t\t\t\t\t\t\toptions={roles}\r\n\t\t\t\t\t\t\t\t\toptionType=\"button\"\r\n\t\t\t\t\t\t\t\t\tbuttonStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tdisabled={!isAdmin}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item label=\"Доступные проекты\" name=\"projects\">\r\n\t\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\t\tdataSource={projectsList}\r\n\t\t\t\t\t\t\t\t\ttitles={['Все', 'Доступные']}\r\n\t\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\t\tonChange={onProjectChange}\r\n\t\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassName=\"btn-resource\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\t\t\tОбновить пользователя\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditUser;\r\n","import React from 'react';\r\nimport { Col, Card, Typography } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\n// import ClipboardCopy from './ClipboardCopy';\r\n\r\nconst { Paragraph } = Typography;\r\n\r\nconst UserPasswords = ({ title, password, username }) => {\r\n\treturn (\r\n\t\t<Col span={12}>\r\n\t\t\t<Card\r\n\t\t\t\ttitle={`Доступ в ${title}`}\r\n\t\t\t\textra={title === 'InfraCallCenter' ? <Link to=\"/infralogins\">Все</Link> : null}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<b>Логин:</b>\r\n\t\t\t\t\t<Paragraph\r\n\t\t\t\t\t\tclassName=\"inline-paragraph\"\r\n\t\t\t\t\t\tcopyable={{\r\n\t\t\t\t\t\t\ttooltips: false,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{username}\r\n\t\t\t\t\t</Paragraph>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<b>Пароль:</b>\r\n\t\t\t\t\t<Paragraph\r\n\t\t\t\t\t\tclassName=\"inline-paragraph\"\r\n\t\t\t\t\t\tcopyable={{\r\n\t\t\t\t\t\t\ttooltips: false,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{password}\r\n\t\t\t\t\t</Paragraph>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t</Col>\r\n\t);\r\n};\r\n\r\nexport default UserPasswords;\r\n","import React from 'react';\r\nimport { Space } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\nimport { ToolTwoTone, DatabaseTwoTone, PieChartTwoTone, UnlockTwoTone } from '@ant-design/icons';\r\n\r\nconst UsefulLinks = () => {\r\n\tconst { infralogins } = useSelector(({ projects }) => projects.userInfo);\r\n\tconst [statisticLink, setStatisticLink] = React.useState(null);\r\n\tconst links = [\r\n\t\t{\r\n\t\t\ttitle: 'Заявить о проблеме',\r\n\t\t\tlink: 'http://script.kolocall.com/includes/iticket',\r\n\t\t\ticon: <ToolTwoTone />,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'TeamPass',\r\n\t\t\tlink: 'http://192.168.137.103/teampass',\r\n\t\t\ticon: <UnlockTwoTone />,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Статистика',\r\n\t\t\tlink: statisticLink,\r\n\t\t\ticon: <PieChartTwoTone />,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Админраздел',\r\n\t\t\tlink: 'http://admin.kolocall.com',\r\n\t\t\ticon: <DatabaseTwoTone />,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'График перерывов',\r\n\t\t\tlink: 'https://docs.google.com/spreadsheets/d/1auMh2uKQ3Mv_CbzpmLIfwk1SZutVh7aGsn8HfoIEH5s/edit?pli=1#gid=1948876889',\r\n\t\t\ticon: <ToolTwoTone />,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Обратная связь',\r\n\t\t\tlink: 'https://docs.google.com/forms/d/e/1FAIpQLScRFy32-HM2aDESYfgWBysLXMZ3wa6E-EPpc1-RfQIsDePL4w/viewform',\r\n\t\t\ticon: <ToolTwoTone />,\r\n\t\t},\r\n\t];\r\n\r\n\tconst getStatisticLink = () => {\r\n\t\tconst dataType = '&data_type=html#';\r\n\t\tlet baseLink =\r\n\t\t\t'http://192.168.137.102/operstatistics/ru/agent.asp?report=0&period=1&details=7&disableEmptyRow=on';\r\n\r\n\t\tfor (let i = 0; i < infralogins.length; i++) {\r\n\t\t\tlet login = infralogins[i].username;\r\n\r\n\t\t\tbaseLink += `&category=KOLOCALLN%5C${login}`;\r\n\t\t}\r\n\r\n\t\tsetStatisticLink(baseLink + dataType);\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\tgetStatisticLink(); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Space direction=\"vertical\">\r\n\t\t\t{links.map((link) => (\r\n\t\t\t\t<a key={link.title} href={link.link} rel=\"noreferrer\" target=\"_blank\">\r\n\t\t\t\t\t{link.title}\r\n\t\t\t\t</a>\r\n\t\t\t))}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nexport default UsefulLinks;\r\n","import React from 'react';\r\nimport { Row, Col, Card, Space } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\nimport UserPasswords from '../../components/UserPasswords';\r\nimport UsefulLinks from '../../components/UsefulLinks';\r\n// import { Link } from 'react-router-dom';\r\n\r\nconst Dashboard = () => {\r\n\tconst { userInfo } = useSelector(({ projects }) => projects);\r\n\r\n\tconst passwords = userInfo.passwords;\r\n\tconst username = userInfo.username;\r\n\tconst projects = userInfo.projects;\r\n\r\n\t// const role = userInfo.role;\r\n\t// const isResourceShown = role === 0 || role === 1;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* {isResourceShown > 1000 && (\r\n\t\t\t\t<Row gutter={22} style={{ marginTop: 22 }}>\r\n\t\t\t\t\t<Col span={3}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"Пользователи\"\r\n\t\t\t\t\t\t\tclassName=\"card-resource\"\r\n\t\t\t\t\t\t\textra={<div>25</div>}\r\n\t\t\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t\t\t<Link to=\"/users\" key=\"list\">\r\n\t\t\t\t\t\t\t\t\t<UnorderedListOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t\t<Link to=\"/users/create\" key=\"create\">\r\n\t\t\t\t\t\t\t\t\t<PlusOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t]}></Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={3}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"Проекты\"\r\n\t\t\t\t\t\t\tclassName=\"card-resource\"\r\n\t\t\t\t\t\t\textra={<div>49</div>}\r\n\t\t\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t\t\t<Link to=\"/projects\" key=\"list\">\r\n\t\t\t\t\t\t\t\t\t<UnorderedListOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t\t<Link to=\"/projects/create\" key=\"create\">\r\n\t\t\t\t\t\t\t\t\t<PlusOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t]}></Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={3}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"Логины ICC\"\r\n\t\t\t\t\t\t\tclassName=\"card-resource\"\r\n\t\t\t\t\t\t\textra={<div>36</div>}\r\n\t\t\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t\t\t<Link to=\"/infrapwds\" key=\"list\">\r\n\t\t\t\t\t\t\t\t\t<UnorderedListOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t\t<Link to=\"/infrapwds/create\" key=\"create\">\r\n\t\t\t\t\t\t\t\t\t<PlusOutlined />\r\n\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t]}></Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t)} */}\r\n\t\t\t<div className=\"parent\" style={{ marginTop: 22 }}>\r\n\t\t\t\t<div className=\"div1\">\r\n\t\t\t\t\t<Card title=\"Входящие проекты\" className=\"projects-list\">\r\n\t\t\t\t\t\t<Space direction=\"vertical\">\r\n\t\t\t\t\t\t\t{projects.in.map((project) => (\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\tkey={project.id}\r\n\t\t\t\t\t\t\t\t\thref={project.scriptlink}\r\n\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t{project.name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"div2\">\r\n\t\t\t\t\t<Row gutter={[22, 22]}>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Card title=\"Подключено проектов\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<b>Входящих:</b> {projects.in_count}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<b>Исходящих:</b> {projects.out_count}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{Object.keys(passwords).map((pwdtype, index) => (\r\n\t\t\t\t\t\t\t<UserPasswords\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\tpwdtype === 'infrapwd'\r\n\t\t\t\t\t\t\t\t\t\t? 'InfraCallCenter'\r\n\t\t\t\t\t\t\t\t\t\t: pwdtype === 'rocketpwd'\r\n\t\t\t\t\t\t\t\t\t\t? 'RocketChat'\r\n\t\t\t\t\t\t\t\t\t\t: 'TeamPass'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\tpassword={passwords[pwdtype]}\r\n\t\t\t\t\t\t\t\tusername={username}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"div3\">\r\n\t\t\t\t\t<Card title=\"Полезные ссылки\">\r\n\t\t\t\t\t\t<UsefulLinks />\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"div4\"></div>\r\n\t\t\t\t<div className=\"div5\"></div>\r\n\t\t\t\t<div className=\"div6\"></div>\r\n\t\t\t\t<div className=\"div7\"></div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from 'react';\r\n// import axios from 'axios';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Table, Typography } from 'antd';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceSearch from '../../components/ResourceSearch';\r\n\r\nconst { Paragraph } = Typography;\r\n\r\nconst Infralogins = () => {\r\n\tconst [searchValue, setSearchValue] = React.useState('');\r\n\r\n\tconst { infralogins, infralogins_all } = useSelector(({ projects }) => projects.userInfo);\r\n\r\n\tconst availableLogin = [...infralogins, ...infralogins_all];\r\n\t// const [infraLogins, setInfraLogins] = React.useState();\r\n\r\n\t// const fetchUserLogins = () => {\r\n\t// \taxios.post('/infralogins').then(({ data }) => {\r\n\t// \t\tsetInfraLogins(data);\r\n\t// \t});\r\n\t// };\r\n\r\n\t// React.useEffect(() => {\r\n\t// \tfetchUserLogins();\r\n\t// }, []);\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Отображаемое имя',\r\n\t\t\tdataIndex: 'displayname',\r\n\t\t\tkey: 'displayname',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Логин',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tkey: 'username',\r\n\t\t\trender: (username) => (\r\n\t\t\t\t<Paragraph\r\n\t\t\t\t\tclassName=\"inline-paragraph table-paragraph\"\r\n\t\t\t\t\tcopyable={{\r\n\t\t\t\t\t\ttooltips: false,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{username}\r\n\t\t\t\t</Paragraph>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Пароль',\r\n\t\t\tdataIndex: 'password',\r\n\t\t\tkey: 'password',\r\n\t\t\trender: (password) => (\r\n\t\t\t\t<Paragraph\r\n\t\t\t\t\tclassName=\"inline-paragraph table-paragraph\"\r\n\t\t\t\t\tcopyable={{\r\n\t\t\t\t\t\ttooltips: false,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{password}\r\n\t\t\t\t</Paragraph>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\" style={{ padding: '14px 25px' }}>\r\n\t\t\t\t<b>Список твоих логинов в Infra</b>\r\n\t\t\t\t<ResourceSearch onSearch={(value) => setSearchValue(value)} />\r\n\t\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t\t<Link to={'/dash'}>Назад</Link>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{!infralogins ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={availableLogin?.filter((pwd) =>\r\n\t\t\t\t\t\t\tpwd.displayname.toLowerCase().includes(searchValue.toLowerCase()),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Infralogins;\r\n","import React from 'react';\r\n\r\nconst Changes = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<iframe\r\n\t\t\t\tsrc=\"https://script.kolocall.com/?project=changes_overall\"\r\n\t\t\t\ttitle=\"changes\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmarginTop: 22,\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\theight: '87vh',\r\n\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\tboxShadow: '0 8px 24px -2px rgba(0, 0, 0, 0.05)',\r\n\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t}}\r\n\t\t\t/>{' '}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Changes;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form, Input, Button, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport brandLogo from '../../assets/img/brand_logo.svg';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from '../../redux/actions/projects';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.get('/csrf-cookie')\r\n\t\t\t.then(() => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/login', values)\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tlocalStorage.setItem('auth_name', data.name);\r\n\t\t\t\t\t\tconst inProjectCount = data.projects.in.reduce(\r\n\t\t\t\t\t\t\t(total, current) => total + current.weight,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst outProjectCount = data.projects.out.reduce(\r\n\t\t\t\t\t\t\t(total, current) => total + current.weight,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tconst resultData = {\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\tprojects: {\r\n\t\t\t\t\t\t\t\t...data.projects,\r\n\t\t\t\t\t\t\t\tin_count: inProjectCount,\r\n\t\t\t\t\t\t\t\tout_count: outProjectCount,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tdispatch(setUserInfo(resultData));\r\n\t\t\t\t\t\tonLogin();\r\n\t\t\t\t\t\thistory.push('/dash');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => message.error(error.response.data.message));\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login\">\r\n\t\t\t<img\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth: '80px',\r\n\t\t\t\t\tmarginBottom: 24,\r\n\t\t\t\t}}\r\n\t\t\t\tsrc={brandLogo}\r\n\t\t\t\talt=\"barndlogo\"\r\n\t\t\t/>\r\n\t\t\t<Form className=\"login-form\" onFinish={onFinish} autoComplete=\"off\" size=\"large\">\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите логин!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tprefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Логин\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите пароль!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input.Password\r\n\t\t\t\t\t\tprefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Пароль\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form-button\"\r\n\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\n\r\nconst AuthLoader = () => {\r\n\tconst antIcon = <LoadingOutlined style={{ fontSize: 44 }} spin />;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'flex',\r\n\t\t\t\tjustifyContent: 'center',\r\n\t\t\t\talignItems: 'center',\r\n\t\t\t\theight: '100%',\r\n\t\t\t}}>\r\n\t\t\t<Spin size=\"large\" indicator={antIcon} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AuthLoader;\r\n","import React from 'react';\r\nimport { Login, Home } from './pages';\r\nimport axios from 'axios';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from './redux/actions/projects';\r\n\r\nimport AuthLoader from './components/AuthLoader';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [isLoggedin, setIsLoggedin] = React.useState(false);\r\n\tconst [checkAuth, setCheckAuth] = React.useState(false);\r\n\r\n\tconst onSuccessLogin = () => {\r\n\t\tsetIsLoggedin(true);\r\n\t};\r\n\r\n\tconst onSuccessLogout = () => {\r\n\t\tsetIsLoggedin(false);\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.post('me')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst inProjectCount = data.projects.in.reduce(\r\n\t\t\t\t\t(total, current) => total + current.weight,\r\n\t\t\t\t\t0,\r\n\t\t\t\t);\r\n\t\t\t\tconst outProjectCount = data.projects.out.reduce(\r\n\t\t\t\t\t(total, current) => total + current.weight,\r\n\t\t\t\t\t0,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst resultData = {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\tprojects: {\r\n\t\t\t\t\t\t...data.projects,\r\n\t\t\t\t\t\tin_count: inProjectCount,\r\n\t\t\t\t\t\tout_count: outProjectCount,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\r\n\t\t\t\tdispatch(setUserInfo(resultData));\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(true);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(false);\r\n\t\t\t}); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!isLoggedin) {\r\n\t\tif (checkAuth) {\r\n\t\t\treturn <Login onLogin={onSuccessLogin} />;\r\n\t\t}\r\n\t\treturn <AuthLoader />;\r\n\t}\r\n\r\n\treturn <Home onSuccessLogout={onSuccessLogout} />;\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport axios from 'axios';\nimport { ConfigProvider } from 'antd';\nimport ruRU from 'antd/lib/locale/ru_RU';\n\nimport App from './App';\n\n// axios.defaults.baseURL = 'http://localhost:8000/api';\naxios.defaults.baseURL = 'https://oper.kolocall.com/api';\naxios.defaults.withCredentials = true;\naxios.interceptors.response.use(\n\t(response) => response,\n\t(error) => {\n\t\tif (error.response.status === 401 || error.response.status === 419) {\n\t\t\tif (localStorage.getItem('auth_name')) {\n\t\t\t\tlocalStorage.clear();\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t},\n);\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ConfigProvider locale={ruRU}>\n\t\t\t<Router>\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<App />\n\t\t\t\t</Provider>\n\t\t\t</Router>\n\t\t</ConfigProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}