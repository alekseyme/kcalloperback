(this.webpackJsonpkolocall_admin=this.webpackJsonpkolocall_admin||[]).push([[0],{289:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(35),r=a.n(s),i=a(26),l=a(32),j=a(97),o=a(171),d=a(24),b={activeProject:null,projectLoading:!1,projectsList:null,tableLoading:!1,tableColumns:[],projectStatuses:[],tableData:null,tablePaginationConfig:null,searchParams:null,userInfo:null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_INFO":return Object(d.a)(Object(d.a)({},e),{},{userInfo:t.payload});case"SET_ACTIVE_PROJECT":return Object(d.a)(Object(d.a)({},e),{},{activeProject:t.payload});case"SET_PROJECT_LOADING":return Object(d.a)(Object(d.a)({},e),{},{projectLoading:t.payload});case"SET_PROJECTS_LIST":return Object(d.a)(Object(d.a)({},e),{},{projectsList:t.payload});case"SET_PROJECT_STATUSES":return Object(d.a)(Object(d.a)({},e),{},{projectStatuses:t.payload});case"SET_TABLE_LOADING":return Object(d.a)(Object(d.a)({},e),{},{tableLoading:t.payload});case"SET_TABLE_COLUMNS":return Object(d.a)(Object(d.a)({},e),{},{tableColumns:t.payload});case"SET_TABLE_DATA":return Object(d.a)(Object(d.a)({},e),{},{tableData:t.payload});case"RESET_TABLE_DATA":return Object(d.a)(Object(d.a)({},e),{},{tableData:null});case"RESET_STORAGE":return Object(d.a)({},b);case"SET_TABLE_PAGINATIONCONFIG":return Object(d.a)(Object(d.a)({},e),{},{tablePaginationConfig:t.payload});case"SET_SEARCH_PARAMS":return Object(d.a)(Object(d.a)({},e),{},{searchParams:t.payload});default:return e}},O=Object(j.b)({projects:u}),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.c,h=Object(j.d)(O,x(Object(j.a)(o.a))),m=a(21),p=a.n(m),f=a(19),g=a(180),y=a.n(g),v=a(14),S=a(296),I=a(41),w=a(30),T=a(307),E=a(187),k=a(308),N=a(309),C=a(310),_=a(93),L=a(301),F=a(53),P=a(306),R=a(185),A=function(e){return{type:"SET_USER_INFO",payload:e}},q=a(2),K=function(e){var t=e.onLogout,a=Object(l.b)(),n=Object(w.g)(),s=c.a.useState(!1),r=Object(v.a)(s,2),i=r[0],j=r[1];return Object(q.jsx)(F.a,{type:"text",onClick:function(){j(!0),p.a.post("/logout").then((function(){localStorage.clear(),t(),a({type:"RESET_STORAGE"}),n.push("/")})).catch((function(){return console.log("logout catch error")})).finally((function(){return j(!1)}))},className:"btn-logout",icon:Object(q.jsx)(P.a,{}),loading:i,children:"\u0412\u044b\u0439\u0442\u0438"})},D=function(e){var t=e.onLogout,a=localStorage.getItem("auth_name"),n=Object(q.jsx)(I.a,{children:Object(q.jsx)(K,{onLogout:t})});return Object(q.jsxs)(q.Fragment,{children:[a?Object(q.jsx)("span",{style:{marginRight:8,fontWeight:600},children:a}):null,Object(q.jsx)(_.a,{overlay:n,trigger:["click"],children:Object(q.jsx)(L.a,{className:"user-avatar",children:a?a[0]:"-"})})]})},z=a.p+"static/media/logo.c7696728.svg",G=a.p+"static/media/brand_logo.e9581c6a.svg",V=S.a.Header,B=S.a.Content,M=S.a.Sider,J=function(e){var t=e.onSuccessLogout,a=c.a.useState(!1),n=Object(v.a)(a,2),s=n[0],r=n[1],j=Object(l.c)((function(e){return e.projects})).userInfo.role,o=1===j||0===j;return Object(q.jsxs)(S.a,{children:[Object(q.jsxs)(M,{collapsible:!0,collapsed:s,onCollapse:function(){r((function(e){return!e}))},children:[Object(q.jsx)("div",{className:"brand-logo",children:Object(q.jsx)("img",{src:s?G:z,alt:"logo"})}),Object(q.jsxs)(I.a,{className:"menu",theme:"dark",defaultSelectedKeys:["/dash"],mode:"inline",children:[Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(T.a,{}),children:Object(q.jsx)(i.b,{to:"/dash",children:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})},"/dash"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(E.a,{}),children:Object(q.jsx)(i.b,{to:"/changes",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})},"/changes"),2===j&&Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(k.a,{}),children:Object(q.jsx)(i.b,{to:"/schedule",children:"\u0413\u0440\u0430\u0444\u0438\u043a"})},"/schedule")}),o&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(I.a.Divider,{style:{backgroundColor:"#002140"}}),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(k.a,{}),children:Object(q.jsx)(i.b,{to:"/projects",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})},"/projects"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(N.a,{}),children:Object(q.jsx)(i.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/users"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(C.a,{}),children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u044b \u0432 ICC"})},"/infrapwds")]})]})]}),Object(q.jsxs)(S.a,{children:[Object(q.jsx)(V,{children:Object(q.jsx)(D,{onLogout:t})}),Object(q.jsx)(B,{className:"site-layout",style:{padding:"0 32px"},children:Object(q.jsxs)(w.d,{children:[Object(q.jsx)(w.b,{exact:!0,path:"/dash",children:Object(q.jsx)(ve,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/changes",children:Object(q.jsx)(Ie,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infralogins",children:Object(q.jsx)(Se,{})}),2===j&&Object(q.jsx)(w.d,{children:Object(q.jsx)(w.b,{exact:!0,path:"/schedule",children:Object(q.jsx)("div",{children:"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..."})})}),o&&Object(q.jsxs)(w.d,{children:[Object(q.jsx)(w.b,{exact:!0,path:"/projects",children:Object(q.jsx)(ce,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/projects/:id/edit",children:Object(q.jsx)(Z,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users",children:Object(q.jsx)(oe,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users/:id/edit",children:Object(q.jsx)(be,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users/create",children:Object(q.jsx)(de,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds",children:Object(q.jsx)(re,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds/:id/edit",children:Object(q.jsx)(je,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds/create",children:Object(q.jsx)(le,{})}),Object(q.jsx)(w.a,{to:"/"})]}),Object(q.jsx)(w.a,{to:"/"})]})})]})]})},U=a(299),H=a(300),Q=a(176),X=a(63),W=function(){var e=Object(q.jsx)(X.a,{style:{fontSize:28},spin:!0});return Object(q.jsx)("div",{style:{textAlign:"center",marginTop:"2px"},children:Object(q.jsx)(Q.a,{indicator:e})})},Z=function(){var e=c.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],j=r[1],o=c.a.useState({}),b=Object(v.a)(o,2),u=b[0],O=b[1],x=c.a.useState([]),h=Object(v.a)(x,2),m=h[0],f=h[1],g=c.a.useState([]),y=Object(v.a)(g,2),S=y[0],I=y[1],T=Object(w.h)().id;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data;I(t)}))}),[]),c.a.useEffect((function(){p.a.get("/projects/".concat(T,"/edit")).then((function(e){var t=e.data;if(O(t),t.users.length>0){var a=t.users.map((function(e){return e.id}));f(a)}})).catch((function(e){return console.log(e)})).finally((function(){j(!1)}))}),[T]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/projects",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(W,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){n(!0);var t=Object(d.a)(Object(d.a)({},e),{},{users:m});p.a.put("/projects/".concat(T),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(e){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return n(!1)}))},initialValues:u,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(H.a,{dataSource:S.filter((function(e){return 0!==e.role})),titles:["\u0412\u0441\u0435","\u041a\u0442\u043e \u0437\u043d\u0430\u0435\u0442"],targetKeys:m,onChange:function(e){f(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:a,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})]})})})]})},Y=a(182),$=a(127),ee=a(302),te=a(297),ae=a(304),ne=a(305),ce=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],j=r[1];c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;n(t)})).finally((function(){return j(!1)}))}),[]);var o=[{title:"\u041f\u0440\u043e\u0435\u043a\u0442",dataIndex:"name",key:"name"},{title:"\u0422\u0438\u043f",dataIndex:"type",key:"type",render:function(e){return Object(q.jsx)(q.Fragment,{children:e?Object(q.jsx)(ne.a,{style:{fontSize:"16px",color:"#1890ff"}}):Object(q.jsx)(ae.a,{style:{fontSize:"16px",color:"#52c41a"}})})}},{title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043a\u0440\u0438\u043f\u0442",dataIndex:"scriptlink",key:"scriptlink"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsx)(ee.b,{size:"middle",children:Object(q.jsx)(i.b,{to:"/projects/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"})})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"controls box",style:{padding:"14px 25px"},children:Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"})}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(W,{}):Object(q.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:o,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},se=a(303),re=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],j=r[1];c.a.useEffect((function(){p.a.get("/infrapwds").then((function(e){var t=e.data;n(t)})).finally((function(){return j(!1)}))}),[]);var o=[{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",dataIndex:"displayname",key:"displayname"},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u041f\u0430\u0440\u043e\u043b\u044c",dataIndex:"password",key:"password"},{title:"\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f",dataIndex:"users",key:"users",render:function(e){if(e.length)return Object(q.jsx)(q.Fragment,{children:e.map((function(e){return Object(q.jsx)(se.a,{color:"blue",children:e.name},e.id)}))})}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsxs)(ee.b,{size:"middle",children:[Object(q.jsx)(i.b,{to:"/infrapwds/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),Object(q.jsx)(F.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/infrapwds/".concat(t)).then((function(e){var c=e.data,s=a.filter((function(e){return e.id!==t}));n(s),R.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043b\u043e\u0433\u0438\u043d\u043e\u0432 ICC"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(W,{}):Object(q.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:o,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},ie=a(109),le=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],j=r[1],o=c.a.useState(!1),b=Object(v.a)(o,2),u=b[0],O=b[1];c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched")}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043b\u043e\u0433\u0438\u043d"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){var t=Object(d.a)(Object(d.a)({},e),{},{users:l});O(!0),p.a.post("/infrapwds",t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return O(!1)}))},autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",name:"displayname",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(ie.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){j(e)},options:a})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:u,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})]})})]})},je=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],j=r[1],o=c.a.useState(!0),b=Object(v.a)(o,2),u=b[0],O=b[1],x=c.a.useState(!1),h=Object(v.a)(x,2),m=h[0],f=h[1],g=c.a.useState({}),y=Object(v.a)(g,2),S=y[0],I=y[1],T=Object(w.h)().id;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched at edit page")}))}),[]),c.a.useEffect((function(){p.a.get("/infrapwds/".concat(T,"/edit")).then((function(e){var t=e.data;if(I(t),t.users.length>0){var a=t.users.map((function(e){return e.id}));j(a)}})).catch((function(e){return console.log(e)})).finally((function(){O(!1)}))}),[T]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043d"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:u?Object(q.jsx)(W,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){f(!0);var t=Object(d.a)(Object(d.a)({},e),{},{users:l});p.a.put("/infrapwds/".concat(T),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return f(!1)}))},initialValues:S,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",name:"displayname",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(ie.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){j(e)},options:a})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:m,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})]})})})]})},oe=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),j=r[0],o=r[1],d=0===Object(l.c)((function(e){return e.projects})).userInfo.role;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var b=[{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"name",key:"name",render:function(e,t){return Object(q.jsx)(q.Fragment,{children:0===t.role?Object(q.jsxs)(q.Fragment,{children:[t.name," ",Object(q.jsx)(se.a,{children:"admin"})]}):1===t.role?Object(q.jsxs)(q.Fragment,{children:[t.name," ",Object(q.jsx)(se.a,{children:"supervisor"})]}):t.name})}},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsxs)(ee.b,{size:"middle",children:[Object(q.jsx)(i.b,{to:"/users/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),d&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(F.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/users/".concat(t)).then((function(e){var c=e.data,s=a.filter((function(e){return e.id!==t}));n(s),R.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(q.jsx)(F.a,{type:"link",onClick:function(){return function(e){var t=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");t&&(console.log(e,t),p.a.patch("/user/changepwd",{userid:e,password:t}).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){return R.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f")})))}(t.id)},children:"\u0421\u0431\u0440\u043e\u0441 \u043f\u0430\u0440\u043e\u043b\u044f"})]})]})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:j?Object(q.jsx)(W,{}):Object(q.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:b,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},de=function(){var e=c.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],j=r[1],o=c.a.useState([]),b=Object(v.a)(o,2),u=b[0],O=b[1];c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;O(t)}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){var t=Object(d.a)(Object(d.a)({},e),{},{projects:l});n(!0),p.a.post("/users",t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return n(!1)}))},initialValues:{role:2},autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 \u041b\u041a",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(Y.a.Password,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 Infra",name:"infrapwd",rules:[{required:!1,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 Infra!"}],children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat",name:"rocketpwd",children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass",name:"teampasspwd",children:Object(q.jsx)(Y.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a.Group,{options:[{label:"\u0410\u0434\u043c\u0438\u043d",value:0},{label:"\u0421\u0443\u043f\u0435\u0440\u0432\u0430\u0439\u0437\u0435\u0440",value:1},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:2}],optionType:"button",buttonStyle:"solid"})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",children:Object(q.jsx)(H.a,{dataSource:u,titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:l,onChange:function(e){j(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:a,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]})},be=function(){var e=c.a.useState(!0),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!1),r=Object(v.a)(s,2),j=r[0],o=r[1],b=c.a.useState({}),u=Object(v.a)(b,2),O=u[0],x=u[1],h=c.a.useState([]),m=Object(v.a)(h,2),f=m[0],g=m[1],y=c.a.useState([]),S=Object(v.a)(y,2),I=S[0],T=S[1],E=Object(w.h)().id,k=0===Object(l.c)((function(e){return e.projects})).userInfo.role;c.a.useEffect((function(){p.a.get("/users/".concat(E,"/edit")).then((function(e){var t=e.data;x(t.user);var a=t.user.projects.map((function(e){return e.id}));g(a)})).catch((function(e){return console.log(e)})).finally((function(){n(!1)}))}),[E]),c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;T(t)}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:a?Object(q.jsx)(W,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){o(!0);var t=Object(d.a)(Object(d.a)({},e),{},{projects:f});p.a.put("/users/".concat(E),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return o(!1)}))},initialValues:O,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)(Y.a,{disabled:!k})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)(Y.a,{disabled:!k})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat",name:"rocketpwd",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat!"}],children:Object(q.jsx)(Y.a,{disabled:!k})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass",name:"teampasspwd",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass!"}],children:Object(q.jsx)(Y.a,{disabled:!k})}),Object(q.jsx)(U.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!1,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a.Group,{options:[{label:"\u0410\u0434\u043c\u0438\u043d",value:0},{label:"\u0421\u0443\u043f\u0435\u0440\u0432\u0430\u0439\u0437\u0435\u0440",value:1},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:2}],optionType:"button",buttonStyle:"solid",disabled:!k})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",name:"projects",children:Object(q.jsx)(H.a,{dataSource:I,titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:f,onChange:function(e){g(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:j,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})})]})},ue=a(298),Oe=a(99),xe=a(56),he=function(e){var t=e.title,a=e.password,n=e.username;return Object(q.jsx)(xe.a,{span:12,children:Object(q.jsxs)(ue.a,{title:"\u0414\u043e\u0441\u0442\u0443\u043f \u0432 ".concat(t),extra:"InfraCallCenter"===t?Object(q.jsx)(i.b,{to:"/infralogins",children:"\u0412\u0441\u0435"}):null,children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u041b\u043e\u0433\u0438\u043d:"})," ",n]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u041f\u0430\u0440\u043e\u043b\u044c:"})," ",a]})]})})},me=a(311),pe=a(312),fe=a(313),ge=a(314),ye=function(){var e=Object(l.c)((function(e){return e.projects.userInfo})).infralogins,t=c.a.useState(null),a=Object(v.a)(t,2),n=a[0],s=a[1],r=[{title:"\u0417\u0430\u044f\u0432\u0438\u0442\u044c \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435",link:"http://script.kolocall.com/includes/iticket",icon:Object(q.jsx)(me.a,{})},{title:"TeamPass",link:"http://192.168.137.103/teampass",icon:Object(q.jsx)(pe.a,{})},{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",link:n,icon:Object(q.jsx)(fe.a,{})},{title:"\u0410\u0434\u043c\u0438\u043d\u0440\u0430\u0437\u0434\u0435\u043b",link:"http://admin.kolocall.com",icon:Object(q.jsx)(ge.a,{})},{title:"\u0413\u0440\u0430\u0444\u0438\u043a \u043f\u0435\u0440\u0435\u0440\u044b\u0432\u043e\u0432",link:"https://docs.google.com/spreadsheets/d/1auMh2uKQ3Mv_CbzpmLIfwk1SZutVh7aGsn8HfoIEH5s/edit?pli=1#gid=1948876889",icon:Object(q.jsx)(me.a,{})},{title:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c",link:"https://docs.google.com/forms/d/e/1FAIpQLScRFy32-HM2aDESYfgWBysLXMZ3wa6E-EPpc1-RfQIsDePL4w/viewform",icon:Object(q.jsx)(me.a,{})}];return c.a.useEffect((function(){!function(){for(var t="http://192.168.137.102/operstatistics/ru/agent.asp?report=0&period=1&details=7&disableEmptyRow=on",a=0;a<e.length;a++){var n=e[a].username;t+="&category=KOLOCALLN%5C".concat(n)}s(t+"&data_type=html#")}()}),[]),Object(q.jsx)(ee.b,{direction:"vertical",children:r.map((function(e){return Object(q.jsx)("a",{href:e.link,rel:"noreferrer",target:"_blank",children:e.title},e.title)}))})},ve=function(){var e=Object(l.c)((function(e){return e.projects})).userInfo,t=e.passwords,a=e.username,n=e.projects.in,c=e.projects.out;return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"parent",style:{marginTop:22},children:[Object(q.jsx)("div",{className:"div1",children:Object(q.jsx)(ue.a,{title:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",className:"projects-list",children:Object(q.jsx)(ee.b,{direction:"vertical",children:n.map((function(e){return Object(q.jsx)("a",{href:e.scriptlink,rel:"noreferrer",target:"_blank",children:e.name},e.id)}))})})}),Object(q.jsx)("div",{className:"div2",children:Object(q.jsxs)(Oe.a,{gutter:[22,22],children:[Object(q.jsx)(xe.a,{span:12,children:Object(q.jsxs)(ue.a,{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0445:"})," ",n.length]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445:"})," ",c.length]})]})}),Object.keys(t).map((function(e,n){return Object(q.jsx)(he,{title:"infrapwd"===e?"InfraCallCenter":"rocketpwd"===e?"RocketChat":"TeamPass",password:t[e],username:a},n)}))]})}),Object(q.jsx)("div",{className:"div3",children:Object(q.jsx)(ue.a,{title:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438",children:Object(q.jsx)(ye,{})})}),Object(q.jsx)("div",{className:"div4"}),Object(q.jsx)("div",{className:"div5"}),Object(q.jsx)("div",{className:"div6"}),Object(q.jsx)("div",{className:"div7"})]})})},Se=function(){var e=Object(l.c)((function(e){return e.projects.userInfo})).infralogins;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0432\u043e\u0438\u0445 \u043b\u043e\u0433\u0438\u043d\u043e\u0432 \u0432 Infra"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/dash",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",children:e?Object(q.jsx)(te.a,{size:"middle",rowKey:function(e){return e.id},columns:[{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",dataIndex:"displayname",key:"displayname"},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u041f\u0430\u0440\u043e\u043b\u044c",dataIndex:"password",key:"password"}],dataSource:e}):Object(q.jsx)(W,{})})]})},Ie=function(){return Object(q.jsxs)("div",{children:[Object(q.jsx)("iframe",{src:"https://script.kolocall.com/?project=changes_overall",title:"changes",style:{marginTop:22,width:"100%",height:"87vh",border:"none",boxShadow:"0 8px 24px -2px rgba(0, 0, 0, 0.05)",borderRadius:4}})," "]})},we=a(315),Te=function(e){var t=e.onLogin,a=c.a.useState(!1),n=Object(v.a)(a,2),s=n[0],r=n[1],i=Object(l.b)(),j=Object(w.g)();return Object(q.jsxs)("div",{className:"login",children:[Object(q.jsx)("img",{style:{width:"80px",marginBottom:24},src:G,alt:"barndlogo"}),Object(q.jsxs)(U.a,{className:"login-form",onFinish:function(e){r(!0),p.a.get("/csrf-cookie").then((function(){p.a.post("/login",e).then((function(e){var a=e.data;localStorage.setItem("auth_name",a.name),i(A(a)),t(),j.push("/dash")})).catch((function(e){return R.b.error(e.response.data.message)}))})).finally((function(){return r(!1)}))},autoComplete:"off",size:"large",children:[Object(q.jsx)(U.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)(Y.a,{prefix:Object(q.jsx)(N.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(q.jsx)(U.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(Y.a.Password,{prefix:Object(q.jsx)(we.a,{className:"site-form-item-icon"}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(q.jsx)(U.a.Item,{children:Object(q.jsx)(F.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:s,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},Ee=function(){var e=Object(q.jsx)(X.a,{style:{fontSize:44},spin:!0});return Object(q.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(q.jsx)(Q.a,{size:"large",indicator:e})})},ke=(a(289),function(){var e=Object(l.b)(),t=c.a.useState(!1),a=Object(v.a)(t,2),n=a[0],s=a[1],r=c.a.useState(!1),i=Object(v.a)(r,2),j=i[0],o=i[1];return c.a.useEffect((function(){p.a.post("me").then((function(t){var a=t.data;e(A(a)),o(!0),s(!0)})).catch((function(){o(!0),s(!1)}))}),[]),n?Object(q.jsx)(J,{onSuccessLogout:function(){s(!1)}}):j?Object(q.jsx)(Te,{onLogin:function(){s(!0)}}):Object(q.jsx)(Ee,{})});p.a.defaults.baseURL="https://oper.kolocall.com/api",p.a.defaults.withCredentials=!0,p.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status||419===e.response.status?(localStorage.getItem("auth_name")&&(localStorage.clear(),window.location.reload()),Promise.reject()):Promise.reject(e)})),r.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(f.a,{locale:y.a,children:Object(q.jsx)(i.a,{children:Object(q.jsx)(l.a,{store:h,children:Object(q.jsx)(ke,{})})})})}),document.getElementById("root"))}},[[294,1,2]]]);
//# sourceMappingURL=main.bb82b784.chunk.js.map