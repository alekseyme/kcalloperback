(this.webpackJsonpkolocall_admin=this.webpackJsonpkolocall_admin||[]).push([[0],{302:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(30),r=a.n(s),i=a(27),l=a(35),o=a(102),j=a(183),u=a(21),d={activeProject:null,projectLoading:!1,projectsList:null,tableLoading:!1,tableColumns:[],projectStatuses:[],tableData:null,tablePaginationConfig:null,searchParams:null,userInfo:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_INFO":return Object(u.a)(Object(u.a)({},e),{},{userInfo:t.payload});case"SET_ACTIVE_PROJECT":return Object(u.a)(Object(u.a)({},e),{},{activeProject:t.payload});case"SET_PROJECT_LOADING":return Object(u.a)(Object(u.a)({},e),{},{projectLoading:t.payload});case"SET_PROJECTS_LIST":return Object(u.a)(Object(u.a)({},e),{},{projectsList:t.payload});case"SET_PROJECT_STATUSES":return Object(u.a)(Object(u.a)({},e),{},{projectStatuses:t.payload});case"SET_TABLE_LOADING":return Object(u.a)(Object(u.a)({},e),{},{tableLoading:t.payload});case"SET_TABLE_COLUMNS":return Object(u.a)(Object(u.a)({},e),{},{tableColumns:t.payload});case"SET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:t.payload});case"RESET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:null});case"RESET_STORAGE":return Object(u.a)({},d);case"SET_TABLE_PAGINATIONCONFIG":return Object(u.a)(Object(u.a)({},e),{},{tablePaginationConfig:t.payload});case"SET_SEARCH_PARAMS":return Object(u.a)(Object(u.a)({},e),{},{searchParams:t.payload});default:return e}},O=Object(o.b)({projects:b}),h=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,x=Object(o.d)(O,h(Object(o.a)(j.a))),m=a(23),p=a.n(m),f=a(22),g=a(193),y=a.n(g),v=a(18),S=a(309),I=a(43),w=a(34),T=a(323),k=a(199),C=a(324),N=a(325),_=a(326),E=a(98),L=a(316),F=a(56),P=a(322),R=a(197),A=function(e){return{type:"SET_USER_INFO",payload:e}},q=a(3),K=function(e){var t=e.onLogout,a=Object(l.b)(),n=Object(w.g)(),s=c.a.useState(!1),r=Object(v.a)(s,2),i=r[0],o=r[1];return Object(q.jsx)(F.a,{type:"text",onClick:function(){o(!0),p.a.post("/logout").then((function(){localStorage.clear(),t(),a({type:"RESET_STORAGE"}),n.push("/")})).catch((function(){return console.log("logout catch error")})).finally((function(){return o(!1)}))},className:"btn-logout",icon:Object(q.jsx)(P.a,{}),loading:i,children:"\u0412\u044b\u0439\u0442\u0438"})},D=function(e){var t=e.onLogout,a=localStorage.getItem("auth_name"),n=Object(q.jsx)(I.a,{children:Object(q.jsx)(K,{onLogout:t})});return Object(q.jsxs)(q.Fragment,{children:[a?Object(q.jsx)("span",{style:{marginRight:8,fontWeight:600},children:a}):null,Object(q.jsx)(E.a,{overlay:n,trigger:["click"],children:Object(q.jsx)(L.a,{className:"user-avatar",children:a?a[0]:"-"})})]})},z=a.p+"static/media/logo.c7696728.svg",V=a.p+"static/media/brand_logo.e9581c6a.svg",G=S.a.Header,B=S.a.Content,M=S.a.Sider,J=function(e){var t=e.onSuccessLogout,a=c.a.useState(!1),n=Object(v.a)(a,2),s=n[0],r=n[1],o=Object(l.c)((function(e){return e.projects})).userInfo.role,j=1===o||0===o;return Object(q.jsxs)(S.a,{children:[Object(q.jsxs)(M,{collapsible:!0,collapsed:s,onCollapse:function(){r((function(e){return!e}))},children:[Object(q.jsx)("div",{className:"brand-logo",children:Object(q.jsx)("img",{src:s?V:z,alt:"logo"})}),Object(q.jsxs)(I.a,{className:"menu",theme:"dark",defaultSelectedKeys:["/dash"],mode:"inline",children:[Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(T.a,{}),children:Object(q.jsx)(i.b,{to:"/dash",children:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})},"/dash"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(k.a,{}),children:Object(q.jsx)(i.b,{to:"/changes",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})},"/changes"),2===o&&Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(C.a,{}),children:Object(q.jsx)(i.b,{to:"/schedule",children:"\u0413\u0440\u0430\u0444\u0438\u043a"})},"/schedule")}),j&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(I.a.Divider,{style:{backgroundColor:"#002140"}}),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(C.a,{}),children:Object(q.jsx)(i.b,{to:"/projects",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})},"/projects"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(N.a,{}),children:Object(q.jsx)(i.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/users"),Object(q.jsx)(I.a.Item,{icon:Object(q.jsx)(_.a,{}),children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u044b \u0432 ICC"})},"/infrapwds")]})]})]}),Object(q.jsxs)(S.a,{children:[Object(q.jsx)(G,{children:Object(q.jsx)(D,{onLogout:t})}),Object(q.jsx)(B,{className:"site-layout",style:{padding:"0 32px"},children:Object(q.jsxs)(w.d,{children:[Object(q.jsx)(w.b,{exact:!0,path:"/dash",children:Object(q.jsx)(Ce,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/changes",children:Object(q.jsx)(Le,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infralogins",children:Object(q.jsx)(Ee,{})}),2===o&&Object(q.jsx)(w.d,{children:Object(q.jsx)(w.b,{exact:!0,path:"/schedule",children:Object(q.jsx)("div",{children:"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..."})})}),j&&Object(q.jsxs)(w.d,{children:[Object(q.jsx)(w.b,{exact:!0,path:"/projects",children:Object(q.jsx)(ie,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/projects/:id/edit",children:Object(q.jsx)(Y,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users",children:Object(q.jsx)(Oe,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users/:id/edit",children:Object(q.jsx)(xe,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/users/create",children:Object(q.jsx)(he,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds",children:Object(q.jsx)(oe,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds/:id/edit",children:Object(q.jsx)(be,{})}),Object(q.jsx)(w.b,{exact:!0,path:"/infrapwds/create",children:Object(q.jsx)(de,{})}),Object(q.jsx)(w.a,{to:"/"})]}),Object(q.jsx)(w.a,{to:"/"})]})})]})]})},U=a(312),H=a(313),Q=a(315),X=a(188),W=a(57),Z=function(){var e=Object(q.jsx)(W.a,{style:{fontSize:28},spin:!0});return Object(q.jsx)("div",{style:{textAlign:"center",marginTop:"2px"},children:Object(q.jsx)(X.a,{indicator:e})})},Y=function(){var e=c.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState({}),d=Object(v.a)(j,2),b=d[0],O=d[1],h=c.a.useState([]),x=Object(v.a)(h,2),m=x[0],f=x[1],g=c.a.useState([]),y=Object(v.a)(g,2),S=y[0],I=y[1],T=Object(w.h)().id;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data;I(t)}))}),[]),c.a.useEffect((function(){p.a.get("/projects/".concat(T,"/edit")).then((function(e){var t=e.data;if(O(t),t.users.length>0){var a=t.users.map((function(e){return e.id}));f(a)}})).catch((function(e){return console.log(e)})).finally((function(){o(!1)}))}),[T]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/projects",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(Z,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){n(!0);var t=Object(u.a)(Object(u.a)({},e),{},{users:m});p.a.put("/projects/".concat(T),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(e){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return n(!1)}))},initialValues:b,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{name:"weight",label:"\u0412\u0435\u0441",children:Object(q.jsx)(H.a,{marks:{0:0,1:1,2:2,3:3},step:null,max:3})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(Q.a,{dataSource:S.filter((function(e){return 0!==e.role})),titles:["\u0412\u0441\u0435","\u041a\u0442\u043e \u0437\u043d\u0430\u0435\u0442"],targetKeys:m,onChange:function(e){f(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:a,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})]})})})]})},$=a(196),ee=a(140),te=a(317),ae=a(310),ne=a(320),ce=a(321),se=$.a.Search,re=function(e){var t=e.onSearch;return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(se,{placeholder:"\u041f\u043e\u0438\u0441\u043a",onSearch:function(e){return t(e)},allowClear:!0,style:{width:200,marginRight:"auto",marginLeft:20}})})},ie=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState(""),u=Object(v.a)(j,2),d=u[0],b=u[1];c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var O=[{title:"\u041f\u0440\u043e\u0435\u043a\u0442",dataIndex:"name",key:"name"},{title:"\u0422\u0438\u043f",dataIndex:"type",key:"type",render:function(e){return Object(q.jsx)(q.Fragment,{children:e?Object(q.jsx)(ce.a,{style:{fontSize:"16px",color:"#1890ff"}}):Object(q.jsx)(ne.a,{style:{fontSize:"16px",color:"#52c41a"}})})}},{title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043a\u0440\u0438\u043f\u0442",dataIndex:"scriptlink",key:"scriptlink"},{title:"\u0412\u0435\u0441",dataIndex:"weight",key:"weight"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsx)(te.b,{size:"middle",children:Object(q.jsx)(i.b,{to:"/projects/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"})})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"}),Object(q.jsx)(re,{onSearch:function(e){return b(e)}})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(Z,{}):Object(q.jsx)(ae.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:O,dataSource:null===a||void 0===a?void 0:a.filter((function(e){return e.name.toLowerCase().includes(d.toLowerCase())})),pagination:{hideOnSinglePage:!0}})})]})},le=a(318),oe=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState(""),u=Object(v.a)(j,2),d=u[0],b=u[1];c.a.useEffect((function(){p.a.get("/infrapwds").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var O=[{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",dataIndex:"displayname",key:"displayname"},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u041f\u0430\u0440\u043e\u043b\u044c",dataIndex:"password",key:"password"},{title:"\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f",dataIndex:"users",key:"users",render:function(e){if(e.length)return Object(q.jsx)(q.Fragment,{children:e.map((function(e){return Object(q.jsx)(le.a,{color:"blue",children:e.name},e.id)}))})}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsxs)(te.b,{size:"middle",children:[Object(q.jsx)(i.b,{to:"/infrapwds/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),Object(q.jsx)(F.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/infrapwds/".concat(t)).then((function(e){var c=e.data,s=a.filter((function(e){return e.id!==t}));n(s),R.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043b\u043e\u0433\u0438\u043d\u043e\u0432 ICC"}),Object(q.jsx)(re,{onSearch:function(e){return b(e)}}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(q.jsx)(Z,{}):Object(q.jsx)(ae.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:O,dataSource:null===a||void 0===a?void 0:a.filter((function(e){return e.displayname.toLowerCase().includes(d.toLowerCase())})),pagination:{hideOnSinglePage:!0}})})]})},je=a(319),ue=a(117),de=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState(!1),d=Object(v.a)(j,2),b=d[0],O=d[1],h=c.a.useState(!1),x=Object(v.a)(h,2),m=x[0],f=x[1];c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched")}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043b\u043e\u0433\u0438\u043d"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{users:l});O(!0),p.a.post("/infrapwds",t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return O(!1)}))},autoComplete:"off",initialValues:{access_to_all:!1},children:[Object(q.jsx)(U.a.Item,{label:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",name:"displayname",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432\u0441\u0435\u043c",name:"access_to_all",valuePropName:"checked",children:Object(q.jsx)(je.a,{onChange:function(e){f(e),!0===e&&o([])}})}),!m&&Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(ue.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){o(e)},options:a})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:b,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})]})})]})},be=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState(!0),d=Object(v.a)(j,2),b=d[0],O=d[1],h=c.a.useState(!1),x=Object(v.a)(h,2),m=x[0],f=x[1],g=c.a.useState({}),y=Object(v.a)(g,2),S=y[0],I=y[1],T=c.a.useState(!1),k=Object(v.a)(T,2),C=k[0],N=k[1],_=Object(w.h)().id;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched at edit page")}))}),[]),c.a.useEffect((function(){p.a.get("/infrapwds/".concat(_,"/edit")).then((function(e){var t=e.data;if(I(t),N(1===t.access_to_all),t.users.length>0){var a=t.users.map((function(e){return e.id}));o(a)}})).catch((function(e){return console.log(e)})).finally((function(){O(!1)}))}),[_]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043d"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/infrapwds",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:b?Object(q.jsx)(Z,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){f(!0);var t=Object(u.a)(Object(u.a)({},e),{},{users:l});p.a.put("/infrapwds/".concat(_),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return f(!1)}))},initialValues:S,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",name:"displayname",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432\u0441\u0435\u043c",name:"access_to_all",valuePropName:"checked",children:Object(q.jsx)(je.a,{onChange:function(e){N(e),!0===e&&o([])}})}),!C&&Object(q.jsx)(U.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(q.jsx)(ue.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){o(e)},options:a})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:m,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043d"})]})})})]})},Oe=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!0),r=Object(v.a)(s,2),o=r[0],j=r[1],u=c.a.useState(""),d=Object(v.a)(u,2),b=d[0],O=d[1],h=0===Object(l.c)((function(e){return e.projects})).userInfo.role;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data;n(t)})).finally((function(){return j(!1)}))}),[]);var x=[{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"name",key:"name",render:function(e,t){return Object(q.jsx)(q.Fragment,{children:0===t.role?Object(q.jsxs)(q.Fragment,{children:[t.name," ",Object(q.jsx)(le.a,{children:"admin"})]}):1===t.role?Object(q.jsxs)(q.Fragment,{children:[t.name," ",Object(q.jsx)(le.a,{children:"supervisor"})]}):t.name})}},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(q.jsxs)(te.b,{size:"middle",children:[Object(q.jsx)(i.b,{to:"/users/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),h&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(F.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/users/".concat(t)).then((function(e){var c=e.data,s=a.filter((function(e){return e.id!==t}));n(s),R.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(q.jsx)(F.a,{type:"link",onClick:function(){return function(e){var t=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");t&&(console.log(e,t),p.a.patch("/user/changepwd",{userid:e,password:t}).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){return R.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f")})))}(t.id)},children:"\u0421\u0431\u0440\u043e\u0441 \u043f\u0430\u0440\u043e\u043b\u044f"})]})]})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(q.jsx)(re,{onSearch:function(e){return O(e)}}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:o?Object(q.jsx)(Z,{}):Object(q.jsx)(ae.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:x,dataSource:null===a||void 0===a?void 0:a.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})),pagination:{hideOnSinglePage:!0}})})]})},he=function(){var e=c.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(v.a)(s,2),l=r[0],o=r[1],j=c.a.useState([]),d=Object(v.a)(j,2),b=d[0],O=d[1];c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;O(t)}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{projects:l});n(!0),p.a.post("/users",t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return n(!1)}))},initialValues:{role:2},autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 \u041b\u041a",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a.Password,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 Infra",name:"infrapwd",rules:[{required:!1,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 Infra!"}],children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat",name:"rocketpwd",children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass",name:"teampasspwd",children:Object(q.jsx)($.a,{})}),Object(q.jsx)(U.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(ee.a.Group,{options:[{label:"\u0410\u0434\u043c\u0438\u043d",value:0},{label:"\u0421\u0443\u043f\u0435\u0440\u0432\u0430\u0439\u0437\u0435\u0440",value:1},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:2}],optionType:"button",buttonStyle:"solid"})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",children:Object(q.jsx)(Q.a,{dataSource:b,titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:l,onChange:function(e){o(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:a,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]})},xe=function(){var e=c.a.useState(!0),t=Object(v.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!1),r=Object(v.a)(s,2),o=r[0],j=r[1],d=c.a.useState({}),b=Object(v.a)(d,2),O=b[0],h=b[1],x=c.a.useState([]),m=Object(v.a)(x,2),f=m[0],g=m[1],y=c.a.useState([]),S=Object(v.a)(y,2),I=S[0],T=S[1],k=Object(w.h)().id,C=0===Object(l.c)((function(e){return e.projects})).userInfo.role;c.a.useEffect((function(){p.a.get("/users/".concat(k,"/edit")).then((function(e){var t=e.data;h(t.user);var a=t.user.projects.map((function(e){return e.id}));g(a)})).catch((function(e){return console.log(e)})).finally((function(){n(!1)}))}),[k]),c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;T(t)}))}),[]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",style:{marginTop:20},children:a?Object(q.jsx)(Z,{}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(U.a,{name:"basic",onFinish:function(e){j(!0);var t=Object(u.a)(Object(u.a)({},e),{},{projects:f});p.a.put("/users/".concat(k),t).then((function(e){var t=e.data;R.b.success(t.message)})).catch((function(){R.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return j(!1)}))},initialValues:O,autoComplete:"off",children:[Object(q.jsx)(U.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(q.jsx)($.a,{disabled:!C})}),Object(q.jsx)(U.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)($.a,{disabled:!C})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat",name:"rocketpwd",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 RocketChat!"}],children:Object(q.jsx)($.a,{disabled:!C})}),Object(q.jsx)(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass",name:"teampasspwd",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 TeamPass!"}],children:Object(q.jsx)($.a,{disabled:!C})}),Object(q.jsx)(U.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!1,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)(ee.a.Group,{options:[{label:"\u0410\u0434\u043c\u0438\u043d",value:0},{label:"\u0421\u0443\u043f\u0435\u0440\u0432\u0430\u0439\u0437\u0435\u0440",value:1},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:2}],optionType:"button",buttonStyle:"solid",disabled:!C})}),Object(q.jsx)(U.a.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",name:"projects",children:Object(q.jsx)(Q.a,{dataSource:I,titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:f,onChange:function(e){g(e)},rowKey:function(e){return e.id},render:function(e){return e.name}})}),Object(q.jsx)(F.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:o,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})})]})},me=a(311),pe=a(104),fe=a(59),ge=a(314),ye=ge.a.Paragraph,ve=function(e){var t=e.title,a=e.password,n=e.username;return Object(q.jsx)(fe.a,{span:12,children:Object(q.jsxs)(me.a,{title:"\u0414\u043e\u0441\u0442\u0443\u043f \u0432 ".concat(t),extra:"InfraCallCenter"===t?Object(q.jsx)(i.b,{to:"/infralogins",children:"\u0412\u0441\u0435"}):null,children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u041b\u043e\u0433\u0438\u043d:"}),Object(q.jsx)(ye,{className:"inline-paragraph",copyable:{tooltips:!1},children:n})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(q.jsx)(ye,{className:"inline-paragraph",copyable:{tooltips:!1},children:a})]})]})})},Se=a(327),Ie=a(328),we=a(329),Te=a(330),ke=function(){var e=Object(l.c)((function(e){return e.projects.userInfo})).infralogins,t=c.a.useState(null),a=Object(v.a)(t,2),n=a[0],s=a[1],r=[{title:"\u0417\u0430\u044f\u0432\u0438\u0442\u044c \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435",link:"http://script.kolocall.com/includes/iticket",icon:Object(q.jsx)(Se.a,{})},{title:"TeamPass",link:"http://192.168.137.103/teampass",icon:Object(q.jsx)(Ie.a,{})},{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",link:n,icon:Object(q.jsx)(we.a,{})},{title:"\u0410\u0434\u043c\u0438\u043d\u0440\u0430\u0437\u0434\u0435\u043b",link:"http://admin.kolocall.com",icon:Object(q.jsx)(Te.a,{})},{title:"\u0413\u0440\u0430\u0444\u0438\u043a \u043f\u0435\u0440\u0435\u0440\u044b\u0432\u043e\u0432",link:"https://docs.google.com/spreadsheets/d/1auMh2uKQ3Mv_CbzpmLIfwk1SZutVh7aGsn8HfoIEH5s/edit?pli=1#gid=1948876889",icon:Object(q.jsx)(Se.a,{})},{title:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c",link:"https://docs.google.com/forms/d/e/1FAIpQLScRFy32-HM2aDESYfgWBysLXMZ3wa6E-EPpc1-RfQIsDePL4w/viewform",icon:Object(q.jsx)(Se.a,{})}];return c.a.useEffect((function(){!function(){for(var t="http://192.168.137.102/operstatistics/ru/agent.asp?report=0&period=1&details=7&disableEmptyRow=on",a=0;a<e.length;a++){var n=e[a].username;t+="&category=KOLOCALLN%5C".concat(n)}s(t+"&data_type=html#")}()}),[]),Object(q.jsx)(te.b,{direction:"vertical",children:r.map((function(e){return Object(q.jsx)("a",{href:e.link,rel:"noreferrer",target:"_blank",children:e.title},e.title)}))})},Ce=function(){var e=Object(l.c)((function(e){return e.projects})).userInfo,t=e.passwords,a=e.username,n=e.projects;return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"parent",style:{marginTop:22},children:[Object(q.jsx)("div",{className:"div1",children:Object(q.jsx)(me.a,{title:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",className:"projects-list",children:Object(q.jsx)(te.b,{direction:"vertical",children:n.in.map((function(e){return Object(q.jsx)("a",{href:e.scriptlink,rel:"noreferrer",target:"_blank",children:e.name},e.id)}))})})}),Object(q.jsx)("div",{className:"div2",children:Object(q.jsxs)(pe.a,{gutter:[22,22],children:[Object(q.jsx)(fe.a,{span:12,children:Object(q.jsxs)(me.a,{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0445:"})," ",n.in_count]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("b",{children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445:"})," ",n.out_count]})]})}),Object.keys(t).map((function(e,n){return Object(q.jsx)(ve,{title:"infrapwd"===e?"InfraCallCenter":"rocketpwd"===e?"RocketChat":"TeamPass",password:t[e],username:a},n)}))]})}),Object(q.jsx)("div",{className:"div3",children:Object(q.jsx)(me.a,{title:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438",children:Object(q.jsx)(ke,{})})}),Object(q.jsx)("div",{className:"div4"}),Object(q.jsx)("div",{className:"div5"}),Object(q.jsx)("div",{className:"div6"}),Object(q.jsx)("div",{className:"div7"})]})})},Ne=a(161),_e=ge.a.Paragraph,Ee=function(){var e=c.a.useState(""),t=Object(v.a)(e,2),a=t[0],n=t[1],s=Object(l.c)((function(e){return e.projects.userInfo})),r=s.infralogins,o=s.infralogins_all,j=[].concat(Object(Ne.a)(r),Object(Ne.a)(o)),u=[{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0435 \u0438\u043c\u044f",dataIndex:"displayname",key:"displayname"},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username",render:function(e){return Object(q.jsx)(_e,{className:"inline-paragraph table-paragraph",copyable:{tooltips:!1},children:e})}},{title:"\u041f\u0430\u0440\u043e\u043b\u044c",dataIndex:"password",key:"password",render:function(e){return Object(q.jsx)(_e,{className:"inline-paragraph table-paragraph",copyable:{tooltips:!1},children:e})}}];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(q.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0432\u043e\u0438\u0445 \u043b\u043e\u0433\u0438\u043d\u043e\u0432 \u0432 Infra"}),Object(q.jsx)(re,{onSearch:function(e){return n(e)}}),Object(q.jsx)(F.a,{type:"primary",style:{marginLeft:"auto"},children:Object(q.jsx)(i.b,{to:"/dash",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(q.jsx)("div",{className:"box",children:r?Object(q.jsx)(ae.a,{size:"middle",rowKey:function(e){return e.id},columns:u,dataSource:null===j||void 0===j?void 0:j.filter((function(e){return e.displayname.toLowerCase().includes(a.toLowerCase())}))}):Object(q.jsx)(Z,{})})]})},Le=function(){return Object(q.jsxs)("div",{children:[Object(q.jsx)("iframe",{src:"https://script.kolocall.com/?project=changes_overall",title:"changes",style:{marginTop:22,width:"100%",height:"87vh",border:"none",boxShadow:"0 8px 24px -2px rgba(0, 0, 0, 0.05)",borderRadius:4}})," "]})},Fe=a(331),Pe=function(e){var t=e.onLogin,a=c.a.useState(!1),n=Object(v.a)(a,2),s=n[0],r=n[1],i=Object(l.b)(),o=Object(w.g)();return Object(q.jsxs)("div",{className:"login",children:[Object(q.jsx)("img",{style:{width:"80px",marginBottom:24},src:V,alt:"barndlogo"}),Object(q.jsxs)(U.a,{className:"login-form",onFinish:function(e){r(!0),p.a.get("/csrf-cookie").then((function(){p.a.post("/login",e).then((function(e){var a=e.data;localStorage.setItem("auth_name",a.name);var n=a.projects.in.reduce((function(e,t){return e+t.weight}),0),c=a.projects.out.reduce((function(e,t){return e+t.weight}),0),s=Object(u.a)(Object(u.a)({},a),{},{projects:Object(u.a)(Object(u.a)({},a.projects),{},{in_count:n,out_count:c})});i(A(s)),t(),o.push("/dash")})).catch((function(e){return R.b.error(e.response.data.message)}))})).finally((function(){return r(!1)}))},autoComplete:"off",size:"large",children:[Object(q.jsx)(U.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(q.jsx)($.a,{prefix:Object(q.jsx)(N.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(q.jsx)(U.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(q.jsx)($.a.Password,{prefix:Object(q.jsx)(Fe.a,{className:"site-form-item-icon"}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(q.jsx)(U.a.Item,{children:Object(q.jsx)(F.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:s,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},Re=function(){var e=Object(q.jsx)(W.a,{style:{fontSize:44},spin:!0});return Object(q.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(q.jsx)(X.a,{size:"large",indicator:e})})},Ae=(a(302),function(){var e=Object(l.b)(),t=c.a.useState(!1),a=Object(v.a)(t,2),n=a[0],s=a[1],r=c.a.useState(!1),i=Object(v.a)(r,2),o=i[0],j=i[1];return c.a.useEffect((function(){p.a.post("me").then((function(t){var a=t.data,n=a.projects.in.reduce((function(e,t){return e+t.weight}),0),c=a.projects.out.reduce((function(e,t){return e+t.weight}),0),r=Object(u.a)(Object(u.a)({},a),{},{projects:Object(u.a)(Object(u.a)({},a.projects),{},{in_count:n,out_count:c})});e(A(r)),j(!0),s(!0)})).catch((function(){j(!0),s(!1)}))}),[]),n?Object(q.jsx)(J,{onSuccessLogout:function(){s(!1)}}):o?Object(q.jsx)(Pe,{onLogin:function(){s(!0)}}):Object(q.jsx)(Re,{})});p.a.defaults.baseURL="https://oper.kolocall.com/api",p.a.defaults.withCredentials=!0,p.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status||419===e.response.status?(localStorage.getItem("auth_name")&&(localStorage.clear(),window.location.reload()),Promise.reject()):Promise.reject(e)})),r.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(f.b,{locale:y.a,children:Object(q.jsx)(i.a,{children:Object(q.jsx)(l.a,{store:x,children:Object(q.jsx)(Ae,{})})})})}),document.getElementById("root"))}},[[307,1,2]]]);
//# sourceMappingURL=main.fc4f1431.chunk.js.map